TimeTable

PRD：TimeTable（时间表导入 & 编辑工具）

1. 产品概述 ✨

一句话：把“别人给的时间表”或“自己写的安排”快速变成可用的日程列表，并支持编辑、提醒、导出。

核心价值
	•	🧲 导入即用：复制粘贴一个 md 表格 / 一段行文本，自动解析成时间表
	•	✍️ 手动也快：逐行输入（像记事本一样），自动识别时间段
	•	🔁 可复用：保存为模板，明天一键套用

⸻

2. 用户与场景 👥

目标用户
	•	学生 / 自律党 / 备考党 / 健身训练 / 开发学习安排的人
	•	想把别人发的时间表（群里、笔记、论坛）直接导入的人

典型场景
	1.	朋友发了 md 表格时间表 → 我想 5 秒导入
	2.	我在备忘录写了几行“12:30 起床” → 我想自动变成时间段
	3.	我每天结构类似 → 我想保存模板复用

⸻

3. 功能范围（MVP）✅

3.1 时间表数据结构（统一模型）

每一条时间块（Block）包含：
	•	start_time 开始时间（必填）
	•	end_time 结束时间（可选：若缺失可推断/留空）
	•	title 标题（必填）
	•	duration 时长（自动计算/可手动输入）
	•	note 备注（可选）
	•	tag 标签（可选，如 学习/开发/运动）
	•	icon 表情（可选，如 🎮 💻）

⸻

3.2 输入方式 A：导入（Import）📥

入口：主页按钮 导入
支持 2 种格式：

A1. Markdown 表格导入（md）

支持类似：

| 时间          | 内容             | 时长    |
| ----------- | -------------- | ----- |
| 12:30–13:00 | 起床、洗漱、喝水       | 0.5h  |
| 13:00–13:30 | 午餐             | 0.5h  |
| 13:30–16:30 | 英语（主学习块）       | 3h    |

解析规则：
	•	识别表头可变（允许“时间/内容/时长”或英文 Time/Task/Duration）
	•	时间字段允许：
	•	12:30-13:00
	•	12:30–13:00（注意长横线）
	•	12:30~13:00
	•	如果有“时长”列：优先采用；没有则用 end-start 自动算
	•	如果内容里有 emoji（🎮💻）：保留为 icon 或标题前缀

错误处理：
	•	某行时间解析失败 → 标红并提示“这行时间不合法”
	•	结束时间早于开始时间 → 提示“是否跨天？”（MVP 可先不支持跨天，给出修正建议）

⸻

A2. 逐行文本导入（Line-by-line）

支持粘贴这种：

12:30-13:00 起床、洗漱、喝水
13:00-13:30 午餐 0.5h
13:30-16:30 英语（主学习块）
16:30-17:30 💻 开发
19:40-02:00 🎮 游戏时间

解析规则：
	•	每行识别 3 段：时间段 + 标题 + 可选时长
	•	分隔符允许：空格、逗号、|、Tab
	•	时长允许：0.5h / 30m / 1:30（可选，MVP 支持 h/m 即可）

智能兼容：
	•	如果用户只写 12:30 起床：
	•	end_time 留空
	•	或用下一条 start_time 作为 end_time（推荐 ✅）
	•	如果最后一条没有 end_time：默认留空，提示可补齐

⸻

3.3 输入方式 B：手动编辑（Manual）✍️

B1. 逐行录入模式（最快）

类似“清单输入框”：
	•	每行一个 Block
	•	输入时自动弹出时间键盘（支持 24 小时制）
	•	支持快捷输入：
	•	输入 1230 自动变 12:30
	•	输入 1230-1330 自动格式化

B2. 卡片编辑模式（精细）

点击某条进入详情编辑：
	•	时间选择器（开始/结束）
	•	标题
	•	标签
	•	备注

⸻

3.4 预览与确认 ✅

导入后进入 解析预览页：
	•	列表展示解析结果
	•	错误行高亮
	•	支持一键：
	•	✅ 全部导入
	•	🧹 清空重来
	•	✏️ 点开修正某一行

⸻

3.5 保存与复用（模板）📌
	•	保存为：
	•	今日时间表
	•	模板：上学日 / 周末 / 备考日
	•	一键套用：
	•	套用模板 → 自动生成今天的时间表

⸻

4. 非功能需求（iOS）📱

性能
	•	导入 200 行以内解析 < 1 秒（本地处理）

离线
	•	必须离线可用 ✅

数据存储
	•	本地存储（CoreData / SQLite / Realm 任选）

兼容
	•	iOS 16+（更稳）

隐私
	•	不上传文本内容，不做云端解析（MVP）

⸻

5. 页面与交互（信息架构）🧭

5.1 首页（Today）
	•	顶部：日期 + “套用模板”
	•	主体：时间块列表（按 start_time 排序）
	•	底部按钮：
	•	＋新增
	•	导入
	•	模板

5.2 导入页（Import）
	•	Tab：
	•	Markdown 表格
	•	逐行文本
	•	粘贴区（大文本框）
	•	按钮：解析预览

5.3 预览页（Preview）
	•	列表（可编辑）
	•	错误提示
	•	确认导入

5.4 模板页（Templates）
	•	模板列表
	•	新建模板 / 删除 / 重命名
	•	一键套用

⸻

6. 关键规则（必须写清楚）⚙️

6.1 时间冲突
	•	默认允许重叠，但提示 “与 XX 冲突”
	•	提供一键修复（后续版本）

6.2 排序与自动补齐
	•	没有 end_time 的条目：
	•	若下一条有 start_time → 用下一条 start_time 作为 end_time（推荐默认 ✅）
	•	若是最后一条 → end_time 留空

6.3 跨天（MVP 建议先不做复杂）
	•	如果 end_time < start_time：
	•	提示“疑似跨天（例如 19:40-02:00）”
	•	处理策略（MVP）：
	•	允许跨天，并标记 is_overnight = true
	•	显示为 “19:40 → 次日 02:00”

⸻

7. 导入格式规范（对外说明）📄

你可以在 App 里放一个“示例模板”，用户点击一键复制。

Markdown 示例

| 时间 | 内容 | 时长 |
| --- | --- | --- |
| 12:30-13:00 | 起床、洗漱 | 0.5h |
| 13:00-16:00 | 学习 | 3h |

逐行示例

12:30-13:00 起床、洗漱 0.5h
13:00-16:00 学习
16:00-17:00 💻 开发


⸻

8. MVP 里程碑（建议开发顺序）🛠️
	1.	✅ 数据结构 + 列表展示（首页）
	2.	✅ 逐行手动输入（新增）
	3.	✅ 导入：逐行文本解析
	4.	✅ 导入：Markdown 表格解析
	5.	✅ 预览页 + 错误高亮
	6.	✅ 模板保存与套用

⸻

9. 未来可扩展（非 MVP）🌱
	•	🔔 提醒/闹钟：每个时间块可设通知
	•	📤 导出：导出为 md / 文本 / 图片
	•	📅 同步：导出到系统日历（EventKit）
	•	🎨 可视化：时间轴视图（Timeline）
	•	🤖 智能生成：输入“大任务”，自动生成时间表草案

⸻

10. 验收标准（QA Checklist）✅
	•	md 表格 50 行导入成功率 > 95%
	•	逐行文本包含不同分隔符仍可解析
	•	– - ~ 都能识别为时间段分隔符
	•	导入后顺序正确、时长计算正确
	•	错误行能定位到具体行号并可编辑修复
	•	跨天时间段能正确显示为“次日”

